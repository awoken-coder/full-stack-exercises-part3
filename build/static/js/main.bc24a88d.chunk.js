(this["webpackJsonpthe-phonebook"]=this["webpackJsonpthe-phonebook"]||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),c=t(13),r=t.n(c),l=t(2),u=t(3),s=t.n(u),i="/api/persons",d=function(){return s.a.get(i).then((function(e){return console.log("server getAll function output",e.data),e.data}))},f=function(e){return console.log("server.add input",e),s.a.post(i,e).then((function(e){return console.log("server.add output",e.data),e.data})).catch((function(e){return console.log("add from server failed",e.response),e.response}))},m=function(e){return console.log("remove func id is,",e),s.a.delete("".concat(i,"/").concat(e)).then((function(e){return console.log("delete response is",e)})).catch((function(e){console.log("delete from server failed",e)}))},p=function(e,n){return console.log("is updating",n),s.a.put("".concat(i,"/").concat(e),n).then((function(e){return console.log("update raw output",e),e})).catch((function(e){return console.log("error",e.response,e.response.data.error),e.response}))},g=function(e){var n=e.addPerson,t=e.newName,o=e.handleNameChange,c=e.newNum,r=e.handleNumChange;return a.a.createElement("form",{onSubmit:n},a.a.createElement("h2",null,"add a new"),a.a.createElement("div",null,"name:",a.a.createElement("input",{value:t,onChange:o})),a.a.createElement("div",null,"number:",a.a.createElement("input",{value:c,onChange:r})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},h=function(e){var n=e.persons,t=e.handleRemove;console.log("numbers input",n);var o=n.map((function(e){return a.a.createElement("li",{key:"".concat(e.id)},e.name," ",e.number," ",a.a.createElement("button",{onClick:function(){return t(e.id)}},"delete"))}));return a.a.createElement("div",null,a.a.createElement("h2",null,"Numbers"),a.a.createElement("ul",null,o))},v=function(e){var n=e.message,t=e.className;return console.log("notification",n),null===n?null:a.a.createElement("div",{className:t},n)},b=function(){var e=Object(o.useState)([{name:"",number:"",id:""}]),n=Object(l.a)(e,2),t=n[0],c=n[1],r=Object(o.useState)(""),u=Object(l.a)(r,2),s=u[0],i=u[1],b=Object(o.useState)(""),E=Object(l.a)(b,2),w=E[0],N=E[1],j=Object(o.useState)(t),O=Object(l.a)(j,2),y=O[0],C=O[1],S=Object(o.useState)(""),k=Object(l.a)(S,2),P=k[0],x=k[1],A=Object(o.useState)(null),D=Object(l.a)(A,2),J=D[0],L=D[1],R=Object(o.useState)(null),T=Object(l.a)(R,2),q=T[0],B=T[1];Object(o.useEffect)((function(){d().then((function(e){console.log("effect output",e),c(e),x(""),C(e),console.log("initial persons e show,e filter",e)})).catch((function(e){return z(e)}))}),[]),Object(o.useEffect)((function(){console.log("filtragem",t),C((function(){return""===P?t:t.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())}))}))}),[t,P]);var I=function(e,n,t){var o={name:n,number:t,id:e};if(console.log("handle update",o),!window.confirm("".concat(o.name,"'s contact already exists. Do you wish to update it?")))return console.log("update aborted");p(e,o).then((function(e){200!==e.status?(console.log("error part of handle update"),z(e.data.error),d().then((function(e){console.log("update output",e),c(e)}))):(console.log("worked"),M("".concat(o.name," was successfuly updated")),d().then((function(e){console.log("update output",e),c(e)})))}))},M=function(e){console.log("handle notification input is",e),L(e),setTimeout((function(){L(null)}),5e3)},z=function(e){console.log("handle errorNotification input is",e),B(e),setTimeout((function(){B(null)}),5e3)};return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(v,{className:"notification",message:J}),a.a.createElement(v,{className:"error",message:q}),a.a.createElement("div",null,"filter shown with",a.a.createElement("input",{onChange:function(e){var n=e.target.value;x(n),console.log("filter")},value:P})),a.a.createElement(g,{addPerson:function(e){var n=!1;if(console.log("addPerson new",s,w),e.preventDefault(),t.forEach((function(e){e.name===s&&(I(e.id,s,w),i(""),N(""),n=!0)})),!n){console.log("addPerson input",e);var o={name:s,number:w};console.log("add person before input",o),f(o).then((function(e){if(e.hasOwnProperty("request"))z(e.data.error);else{var n=t.concat(e);console.log("setpersons input",n),c(n),i(""),N("");var o="".concat(s," was successfuly added");console.log("add person output message is",o),M(o)}})).catch((function(e){return console.log("app.js",e)}))}},newName:s,handleNameChange:function(e){console.log("setNewName and persons",e.target.value,t),i(e.target.value)},newNum:w,handleNumChange:function(e){return console.log("setNewNum",e.target.value),N(e.target.value),console.log("updated")}}),a.a.createElement(h,{persons:y,handleRemove:function(e){var n=t.find((function(n){return n.id===e}));if(console.log("removing entry",e,n),!window.confirm("Are you sure you want to delete ".concat(n.name,"'s contact?")))return console.log("removal aborted");m(e).then((function(){console.log("remove part 2"),d().then((function(e){console.log("effect output",e),c(e);var t="".concat(n.name," was successfuly deleted");console.log("delete person output message is",t),M(t)}))}))}}))};t(36);r.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(b,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.bc24a88d.chunk.js.map